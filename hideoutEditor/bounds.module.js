import * as constants from "hideoutEditor/constants.module.js"
import * as THREE from "three"

export const shrine = [
  [275, 488],
  [275, 483],
  [293, 488],
  [293, 506],
  [298, 507],
  [298, 529],
  [319, 530],
  [321, 533],
  [339, 533],
  [340, 583],
  [372, 583],
  [372, 533],
  [397, 533],
  [397, 511],
  [414, 511],
  [414, 506],
  [452, 506],
  [465, 494],
  [471, 500],
  [459, 513],
  [459, 575],
  [505, 575],
  [529, 551],
  [529, 543],
  [542, 530],
  [551, 529],
  [575, 505],
  [575, 459],
  [513, 459],
  [500, 471],
  [493, 465],
  [506, 452],
  [511, 414],
  [506, 414],
  [511, 396],
  [533, 397],
  [533, 372],
  [629, 372],
  [629, 340],
  [534, 340],
  [533, 321],
  [529, 318],
  [529, 298],
  [506, 297],
  [506, 293],
  [488, 292],
  [488, 275],
  [483, 274],
  [483, 252],
  [460, 248],
  [460, 252],
  [385, 248],
  [385, 269],
  [367, 270],
  [367, 274],
  [306, 275],
  [293, 288],
  [286, 281],
  [299, 268],
  [299, 230],
  [275, 206],
  [230, 206],
  [206, 230],
  [206, 275],
  [230, 299],
  [268, 299],
  [281, 286],
  [287, 293],
  [275, 306],
  [275, 366],
  [270, 367],
  [269, 385],
  [248, 384],
  [248, 460],
  [252, 460],
]

export const felled = [
  [146, 183],
  [142, 185],
  [139, 189],
  [136, 193],
  [133, 196],
  [132, 202],
  [131, 206],
  [132, 211],
  [133, 217],
  [133, 223],
  [132, 229],
  [132, 233],
  [132, 238],
  [132, 244],
  [132, 250],
  [132, 255],
  [132, 259],
  [132, 263],
  [131, 265],
  [129, 269],
  [124, 276],
  [121, 278],
  [118, 281],
  [116, 284],
  [116, 289],
  [117, 293],
  [119, 297],
  [121, 306],
  [123, 311],
  [125, 314],
  [126, 321],
  [127, 326],
  [130, 334],
  [129, 340],
  [129, 344],
  [135, 350],
  [142, 354],
  [149, 355],
  [156, 356],
  [160, 357],
  [164, 359],
  [168, 360],
  [173, 362],
  [179, 365],
  [182, 368],
  [185, 372],
  [189, 377],
  [192, 381],
  [195, 385],
  [196, 390],
  [195, 397],
  [195, 402],
  [195, 408],
  [193, 417],
  [193, 422],
  [192, 428],
  [192, 435],
  [196, 441],
  [199, 445],
  [208, 449],
  [215, 450],
  [221, 451],
  [227, 454],
  [231, 457],
  [235, 464],
  [238, 470],
  [239, 476],
  [239, 481],
  [239, 487],
  [239, 493],
  [237, 497],
  [232, 501],
  [227, 504],
  [220, 506],
  [213, 506],
  [210, 506],
  [206, 508],
  [202, 510],
  [199, 514],
  [196, 517],
  [192, 521],
  [190, 524],
  [189, 530],
  [189, 534],
  [189, 539],
  [189, 544],
  [189, 550],
  [190, 554],
  [189, 561],
  [189, 564],
  [190, 569],
  [190, 572],
  [189, 579],
  [189, 584],
  [190, 587],
  [192, 590],
  [196, 590],
  [200, 591],
  [205, 591],
  [211, 591],
  [216, 591],
  [219, 591],
  [222, 590],
  [227, 588],
  [230, 586],
  [234, 586],
  [239, 586],
  [242, 585],
  [245, 584],
  [250, 582],
  [255, 581],
  [258, 580],
  [262, 579],
  [265, 578],
  [269, 576],
  [272, 574],
  [275, 572],
  [279, 570],
  [284, 571],
  [291, 576],
  [296, 581],
  [303, 583],
  [307, 587],
  [308, 591],
  [308, 594],
  [309, 600],
  [309, 605],
  [309, 609],
  [309, 614],
  [309, 620],
  [309, 623],
  [309, 627],
  [309, 631],
  [310, 637],
  [310, 640],
  [311, 645],
  [315, 649],
  [320, 652],
  [325, 653],
  [325, 649],
  [327, 643],
  [330, 640],
  [333, 634],
  [335, 631],
  [338, 628],
  [344, 629],
  [344, 634],
  [342, 637],
  [345, 640],
  [350, 641],
  [354, 640],
  [357, 636],
  [359, 632],
  [363, 630],
  [367, 628],
  [371, 628],
  [374, 627],
  [377, 627],
  [381, 627],
  [384, 627],
  [387, 627],
  [390, 626],
  [393, 626],
  [398, 628],
  [403, 631],
  [408, 633],
  [412, 634],
  [415, 634],
  [417, 633],
  [420, 631],
  [422, 629],
  [424, 627],
  [426, 624],
  [427, 621],
  [428, 619],
  [429, 614],
  [430, 611],
  [431, 609],
  [432, 606],
  [433, 603],
  [433, 599],
  [434, 597],
  [435, 593],
  [435, 589],
  [435, 585],
  [436, 581],
  [438, 577],
  [440, 575],
  [442, 572],
  [444, 569],
  [446, 566],
  [449, 563],
  [450, 561],
  [452, 557],
  [452, 553],
  [452, 549],
  [450, 546],
  [447, 543],
  [445, 539],
  [442, 536],
  [439, 533],
  [436, 530],
  [432, 527],
  [428, 523],
  [424, 520],
  [419, 519],
  [415, 518],
  [411, 518],
  [408, 520],
  [405, 521],
  [403, 522],
  [399, 524],
  [396, 525],
  [391, 525],
  [385, 523],
  [381, 519],
  [376, 516],
  [373, 512],
  [372, 507],
  [370, 503],
  [368, 498],
  [367, 492],
  [366, 486],
  [365, 480],
  [364, 475],
  [362, 471],
  [360, 469],
  [356, 468],
  [350, 467],
  [345, 468],
  [342, 469],
  [337, 468],
  [332, 469],
  [327, 469],
  [323, 469],
  [319, 469],
  [313, 470],
  [308, 467],
  [303, 463],
  [299, 459],
  [295, 455],
  [293, 449],
  [291, 444],
  [290, 440],
  [288, 435],
  [287, 430],
  [286, 424],
  [285, 421],
  [285, 418],
  [285, 413],
  [280, 408],
  [278, 404],
  [275, 398],
  [274, 388],
  [274, 383],
  [274, 378],
  [274, 373],
  [275, 369],
  [277, 365],
  [279, 361],
  [280, 357],
  [282, 353],
  [284, 348],
  [284, 343],
  [285, 339],
  [286, 334],
  [287, 330],
  [287, 326],
  [288, 322],
  [290, 318],
  [292, 313],
  [294, 310],
  [296, 307],
  [299, 303],
  [303, 301],
  [306, 298],
  [310, 295],
  [314, 291],
  [318, 289],
  [323, 290],
  [330, 290],
  [335, 290],
  [339, 289],
  [345, 289],
  [349, 289],
  [353, 290],
  [358, 291],
  [361, 288],
  [363, 284],
  [364, 280],
  [365, 276],
  [367, 271],
  [368, 266],
  [369, 260],
  [370, 255],
  [369, 250],
  [370, 245],
  [370, 240],
  [367, 236],
  [365, 232],
  [363, 227],
  [362, 223],
  [360, 218],
  [358, 212],
  [355, 207],
  [350, 202],
  [345, 199],
  [340, 196],
  [335, 195],
  [329, 195],
  [324, 196],
  [318, 196],
  [313, 194],
  [308, 191],
  [304, 189],
  [300, 185],
  [295, 181],
  [291, 176],
  [288, 172],
  [286, 167],
  [284, 162],
  [283, 156],
  [283, 150],
  [284, 145],
  [284, 140],
  [283, 136],
  [277, 131],
  [272, 128],
  [267, 126],
  [262, 128],
  [254, 128],
  [249, 126],
  [244, 125],
  [239, 123],
  [235, 123],
  [230, 123],
  [224, 124],
  [220, 124],
  [214, 126],
  [208, 126],
  [202, 128],
  [198, 131],
  [193, 135],
  [191, 140],
  [189, 143],
  [187, 149],
  [186, 153],
  [186, 156],
  [187, 161],
  [186, 167],
  [184, 173],
  [182, 176],
  [178, 179],
  [172, 182],
  [168, 183],
  [160, 183],
  [158, 182],
  [155, 181],
  [149, 182],
]

export const byHash = {
  "13526": felled,
  "26805": shrine,
}

export const makeObject = (points) => {
  const vectors = points.map(it => new THREE.Vector2(it[0], it[1]))
  const shape = new THREE.Shape(vectors)
  const geometry = new THREE.ShapeGeometry(shape)
  geometry.rotateX(-Math.PI / 2)
  geometry.rotateY(-Math.PI / 2)

  const edges = new THREE.EdgesGeometry(geometry)
  const lines = new THREE.LineSegments(edges,
    new THREE.LineBasicMaterial({ color: 0xFF8888 })
  )

  return lines
}

export const fromHideoutHash = (hash) => {
  const points = byHash[hash] || felled
  return makeObject(points)
}
